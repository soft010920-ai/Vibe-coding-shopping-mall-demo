# 주문 생성 오류 해결 가이드

## 문제: 400 Bad Request - 유효성 검증 실패

### 1단계: 브라우저 콘솔 확인

1. **F12**를 눌러 개발자 도구 열기
2. **Console** 탭에서 다음 로그 확인:
   - "주문 요청 데이터:" - 전송되는 데이터 확인
   - "서버 응답 본문:" - 서버에서 반환하는 에러 메시지 확인
   - "주문 생성 실패 상세:" - 상세 에러 정보 확인

3. **Network** 탭에서:
   - `orders` 요청 클릭
   - **Response** 탭에서 서버 응답 본문 확인
   - 예: `{"error":"유효성 검증 실패","details":["수령인 전화번호는 필수입니다."]}`

### 2단계: 서버 콘솔 확인

서버 터미널에서 다음 로그 확인:
- "주문 생성 요청 받음:" - 받은 데이터 확인
- "주문 데이터 (스키마 저장 전):" - 스키마에 전달되는 데이터 확인
- "유효성 검증 실패 상세:" - 어떤 필드가 문제인지 확인

### 3단계: 일반적인 원인 및 해결

#### 원인 1: 전화번호가 빈 문자열
**증상:** `"수령인 전화번호는 필수입니다."` 에러

**해결:**
- 휴대전화 번호 입력 필드에 값을 입력했는지 확인
- 중간 번호와 마지막 번호 모두 입력했는지 확인

#### 원인 2: 배송 주소가 빈 문자열
**증상:** `"배송 주소는 필수입니다."` 에러

**해결:**
- 배송 주소 입력 필드에 값을 입력했는지 확인
- 주소검색 버튼을 눌러 주소를 선택했는지 확인

#### 원인 3: 수령인 이름이 빈 문자열
**증상:** `"수령인 이름은 필수입니다."` 에러

**해결:**
- 받는사람 입력 필드에 값을 입력했는지 확인

#### 원인 4: shippingFee가 전달되지 않음
**증상:** `"배송비는 0 이상이어야 합니다."` 에러

**해결:**
- 이미 수정됨: `Number(shippingFee) || 0`로 처리

### 4단계: 디버깅 명령어

브라우저 콘솔에서 실행:
```javascript
// 현재 폼 데이터 확인
console.log('배송지 정보:', {
  recipientName: document.querySelector('input[value*="받는사람"]')?.value,
  phone: document.querySelector('.phone-row input')?.value,
  address: document.querySelector('input[placeholder*="기본주소"]')?.value
})
```

### 5단계: 빠른 확인

다음 필드들이 모두 입력되어 있는지 확인:
- ✅ 받는사람 이름
- ✅ 휴대전화 번호 (중간 번호 + 마지막 번호)
- ✅ 배송 주소 (기본주소)
- ✅ 우편번호 (선택사항이지만 권장)

### 6단계: 여전히 문제가 있다면

다음 정보를 공유해주세요:
1. 브라우저 콘솔의 "서버 응답 본문:" 로그
2. 서버 콘솔의 "유효성 검증 실패 상세:" 로그
3. Network 탭의 Response 본문
